<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoundWave Studio</title>
    <link rel="stylesheet" href="../projects.css">
</head>
<script src="../../js/gsap.min.js"></script>
<body>
    <a href="../../portfolio.html">
        <div class="backbutton">
            BACK
        </div>
    </a>
    <div class="container">
        <div class="column">
        </div>
        <div class="main">
            <div id="buttons"></div>
            <div class="learningoutcomes">
                <div class="outcomesbutton prof">PROFESSIONAL STANDARDS</div>
                <div class="outcomesbutton iter">ITERATIVE DESIGN</div>
            </div>

            <h1>title</h1>
            <p>description</p>
            <p>content</p>
        </div>
        <div class="column">
            <div class="imagebox">
                <div class="imagefile"></div>
            </div>
        </div>
    </div>
    <div id="content"></div>
    <script>
        fetch('../../json/soundwave.json')
            .then(response => response.json()) // json parse
            .then(data => {
                // using existing elements
                const h1 = document.querySelector('h1');
                const p = document.querySelectorAll('p');

                h1.textContent = data.title;
                p[0].textContent = data.description;
                p[1].textContent = data.pagecontent;

                const learningOutcomes = document.querySelector('.learningoutcomes');
                while (learningOutcomes.firstChild) {
                    learningOutcomes.firstChild.remove();
                }

                data.tags.forEach(tag => {
                    const button = document.createElement('div');
                    button.className = 'outcomesbutton ' + tag.slice(0, 4);
                    button.textContent = tag.toUpperCase();
                    learningOutcomes.appendChild(button);
                });
            })
            .catch(error => console.error('Error:', error));
        // buttons json file
        fetch('../../json/buttons.json')
            .then(response => response.json()) // json parse
            .then(buttonsData => {
                const buttonsDiv = document.querySelector('#buttons');

                buttonsData.forEach(buttonData => {
                    const button = document.createElement('button');
                    button.textContent = buttonData.name;
                    button.addEventListener('click', () => {
                        fetch(`../../json/${buttonData.file}`)
                            .then(response => response.json())
                            .then(data => {
                                const h1 = document.querySelector('h1');
                                const p = document.querySelectorAll('p');
                                const imagefileDiv = document.querySelector('.imagefile');

                                h1.textContent = data.title;
                                p[0].textContent = data.description;
                                p[1].textContent = data.pagecontent;

                                while (imagefileDiv.firstChild) {
                                    imagefileDiv.firstChild.remove();
                                }

                                const img = document.createElement('img');
                                img.src = data.imagefile;
                                imagefileDiv.appendChild(img);

                                const learningOutcomes = document.querySelector('.learningoutcomes');

                                while (learningOutcomes.firstChild) {
                                    learningOutcomes.firstChild.remove();
                                }
                                data.tags.forEach(tag => {
                                    const outcomeButton = document.createElement('div');
                                    outcomeButton.className = 'outcomesbutton ' + tag.slice(0, 4);
                                    outcomeButton.textContent = tag.toUpperCase();
                                    learningOutcomes.appendChild(outcomeButton);
                                });

                                gsap.from(h1, { duration: 1, y: -100, opacity: 0 });
                                gsap.from(p, { duration: 1, y: -100, opacity: 0, stagger: 0.2 });
                                gsap.from('.outcomesbutton', { duration: 1, y: -50, opacity: 0, stagger: 0.2 });
                                gsap.from(img, { duration: 1, y: -50, opacity: 0 });
                            })
                            .catch(error => console.error('Error:', error));
                    });
                    buttonsDiv.appendChild(button);
                });
            })
            .catch(error => console.error('Error:', error));
    </script>
</body>
</html>